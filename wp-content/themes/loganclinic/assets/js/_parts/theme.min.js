!function(e,i,o){"undefined"!=typeof module&&module.exports?module.exports=o():"function"==typeof define&&define.amd?define(i,o):e[i]=o()}(this,"bowser",function(){var B=!0;function t(o){function e(e){var i=o.match(e);return i&&1<i.length&&i[1]||""}function i(e){var i=o.match(e);return i&&1<i.length&&i[2]||""}var s,n=e(/(ipod|iphone|ipad)/i).toLowerCase(),r=!/like android/i.test(o)&&/android/i.test(o),t=/nexus\s*[0-6]\s*/i.test(o),a=!t&&/nexus\s*[0-9]+/i.test(o),d=/CrOS/.test(o),m=/silk/i.test(o),l=/sailfish/i.test(o),c=/tizen/i.test(o),v=/(web|hpw)(o|0)s/i.test(o),u=/windows phone/i.test(o),p=(/SamsungBrowser/i.test(o),!u&&/windows/i.test(o)),f=!n&&!m&&/macintosh/i.test(o),h=!r&&!l&&!c&&!v&&/linux/i.test(o),b=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),w=e(/version\/(\d+(\.\d+)?)/i),g=/tablet/i.test(o)&&!/tablet pc/i.test(o),y=!g&&/[^-]mobi/i.test(o),k=/xbox/i.test(o);/opera/i.test(o)?s={name:"Opera",opera:B,version:w||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(o)?s={name:"Opera",opera:B,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||w}:/SamsungBrowser/i.test(o)?s={name:"Samsung Internet for Android",samsungBrowser:B,version:w||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(o)?s={name:"NAVER Whale browser",whale:B,version:e(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(o)?s={name:"MZ Browser",mzbrowser:B,version:e(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(o)?s={name:"Opera Coast",coast:B,version:w||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(o)?s={name:"Focus",focus:B,version:e(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(o)?s={name:"Yandex Browser",yandexbrowser:B,version:w||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(o)?s={name:"UC Browser",ucbrowser:B,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(o)?s={name:"Maxthon",maxthon:B,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(o)?s={name:"Epiphany",epiphany:B,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(o)?s={name:"Puffin",puffin:B,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(o)?s={name:"Sleipnir",sleipnir:B,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(o)?s={name:"K-Meleon",kMeleon:B,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:u?(s={name:"Windows Phone",osname:"Windows Phone",windowsphone:B}).version=b?(s.msedge=B,b):(s.msie=B,e(/iemobile\/(\d+(\.\d+)?)/i)):/msie|trident/i.test(o)?s={name:"Internet Explorer",msie:B,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?s={name:"Chrome",osname:"Chrome OS",chromeos:B,chromeBook:B,chrome:B,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(o)?s={name:"Microsoft Edge",msedge:B,version:b}:/vivaldi/i.test(o)?s={name:"Vivaldi",vivaldi:B,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||w}:l?s={name:"Sailfish",osname:"Sailfish OS",sailfish:B,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(o)?s={name:"SeaMonkey",seamonkey:B,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(o)?(s={name:"Firefox",firefox:B,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(o)&&(s.firefoxos=B,s.osname="Firefox OS")):m?s={name:"Amazon Silk",silk:B,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(o)?s={name:"PhantomJS",phantom:B,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(o)?s={name:"SlimerJS",slimer:B,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(o)||/rim\stablet/i.test(o)?s={name:"BlackBerry",osname:"BlackBerry OS",blackberry:B,version:w||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:v?(s={name:"WebOS",osname:"WebOS",webos:B,version:w||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(o)&&(s.touchpad=B)):/bada/i.test(o)?s={name:"Bada",osname:"Bada",bada:B,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:c?s={name:"Tizen",osname:"Tizen",tizen:B,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||w}:/qupzilla/i.test(o)?s={name:"QupZilla",qupzilla:B,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||w}:/chromium/i.test(o)?s={name:"Chromium",chromium:B,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||w}:/chrome|crios|crmo/i.test(o)?s={name:"Chrome",chrome:B,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?s={name:"Android",version:w}:/safari|applewebkit/i.test(o)?(s={name:"Safari",safari:B},w&&(s.version=w)):n?(s={name:"iphone"==n?"iPhone":"ipad"==n?"iPad":"iPod"},w&&(s.version=w)):s=/googlebot/i.test(o)?{name:"Googlebot",googlebot:B,version:e(/googlebot\/(\d+(\.\d+))/i)||w}:{name:e(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!s.msedge&&/(apple)?webkit/i.test(o)?(/(apple)?webkit\/537\.36/i.test(o)?(s.name=s.name||"Blink",s.blink=B):(s.name=s.name||"Webkit",s.webkit=B),!s.version&&w&&(s.version=w)):!s.opera&&/gecko\//i.test(o)&&(s.name=s.name||"Gecko",s.gecko=B,s.version=s.version||e(/gecko\/(\d+(\.\d+)?)/i)),s.windowsphone||!r&&!s.silk?!s.windowsphone&&n?(s[n]=B,s.ios=B,s.osname="iOS"):f?(s.mac=B,s.osname="macOS"):k?(s.xbox=B,s.osname="Xbox"):p?(s.windows=B,s.osname="Windows"):h&&(s.linux=B,s.osname="Linux"):(s.android=B,s.osname="Android");var x="";s.windows?x=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(e(/Windows ((NT|XP)( \d\d?.\d)?)/i)):s.windowsphone?x=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):s.mac?x=(x=e(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):n?x=(x=e(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):r?x=e(/android[ \/-](\d+(\.\d+)*)/i):s.webos?x=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):s.blackberry?x=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):s.bada?x=e(/bada\/(\d+(\.\d+)*)/i):s.tizen&&(x=e(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(s.osversion=x);var S=!s.windows&&x.split(".")[0];return g||a||"ipad"==n||r&&(3==S||4<=S&&!y)||s.silk?s.tablet=B:(y||"iphone"==n||"ipod"==n||r||t||s.blackberry||s.webos||s.bada)&&(s.mobile=B),s.msedge||s.msie&&10<=s.version||s.yandexbrowser&&15<=s.version||s.vivaldi&&1<=s.version||s.chrome&&20<=s.version||s.samsungBrowser&&4<=s.version||s.whale&&1===T([s.version,"1.0"])||s.mzbrowser&&1===T([s.version,"6.0"])||s.focus&&1===T([s.version,"1.0"])||s.firefox&&20<=s.version||s.safari&&6<=s.version||s.opera&&10<=s.version||s.ios&&s.osversion&&6<=s.osversion.split(".")[0]||s.blackberry&&10.1<=s.version||s.chromium&&20<=s.version?s.a=B:s.msie&&s.version<10||s.chrome&&s.version<20||s.firefox&&s.version<20||s.safari&&s.version<6||s.opera&&s.version<10||s.ios&&s.osversion&&s.osversion.split(".")[0]<6||s.chromium&&s.version<20?s.c=B:s.x=B,s}var a=t("undefined"!=typeof navigator&&navigator.userAgent||"");function s(e){return e.split(".").length}function n(e,i){var o,s=[];if(Array.prototype.map)return Array.prototype.map.call(e,i);for(o=0;o<e.length;o++)s.push(i(e[o]));return s}function T(e){for(var o=Math.max(s(e[0]),s(e[1])),i=n(e,function(e){var i=o-s(e);return n((e+=new Array(i+1).join(".0")).split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});0<=--o;){if(i[0][o]>i[1][o])return 1;if(i[0][o]!==i[1][o])return-1;if(0===o)return 0}}function r(e,i,o){var s=a;"string"==typeof i&&(o=i,i=void 0),void 0===i&&(i=!1),o&&(s=t(o));var n=""+s.version;for(var r in e)if(e.hasOwnProperty(r)&&s[r]){if("string"!=typeof e[r])throw new Error("Browser version in the minVersion map should be a string: "+r+": "+String(e));return T([n,e[r]])<0}return i}return a.test=function(e){for(var i=0;i<e.length;++i){var o=e[i];if("string"==typeof o&&o in a)return!0}return!1},a.isUnsupportedBrowser=r,a.compareVersions=T,a.check=function(e,i,o){return!r(e,i,o)},a._detect=t,a.detect=t,a}),function(){console.log("menu has loaded");var n=document.querySelector(".header--menu > .menu");document.body.onload=function(){var e=document.createElement("div");e.setAttribute("class","nav-toggle");var i=document.createElement("div");i.setAttribute("class","line");var o=document.createElement("div");i.setAttribute("class","line");var s=document.createElement("div");i.setAttribute("class","line"),e.appendChild(i),e.appendChild(o),e.appendChild(s),document.body.insertBefore(e,n)};var i={navToggle:document.querySelector(".nav-toggle"),nav:document.querySelector("nav"),doToggle:function(e){e.preventDefault(),this.navToggle.classList.toggle("expanded"),this.nav.classList.toggle("expanded")}};i.navToggle.addEventListener("click",function(e){i.doToggle(e)}),i.nav.addEventListener("click",function(e){i.doToggle(e)})}(),jQuery(document).ready(function(e){"ontouchstart"in document.documentElement&&e("body").removeClass("no-touch"),bowser.msie&&11==bowser.version?e("body").addClass("ie-11"):bowser.safari&&e("body").addClass("safari")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvd3Nlci5qcyIsIl9tZW51LmpzIiwidGhlbWUuanMiXSwibmFtZXMiOlsicm9vdCIsIm5hbWUiLCJkZWZpbml0aW9uIiwibW9kdWxlIiwiZXhwb3J0cyIsImRlZmluZSIsImFtZCIsInRoaXMiLCJ0IiwiZGV0ZWN0IiwidWEiLCJnZXRGaXJzdE1hdGNoIiwicmVnZXgiLCJtYXRjaCIsImxlbmd0aCIsImdldFNlY29uZE1hdGNoIiwicmVzdWx0IiwiaW9zZGV2aWNlIiwidG9Mb3dlckNhc2UiLCJhbmRyb2lkIiwidGVzdCIsIm5leHVzTW9iaWxlIiwibmV4dXNUYWJsZXQiLCJjaHJvbWVvcyIsInNpbGsiLCJzYWlsZmlzaCIsInRpemVuIiwid2Vib3MiLCJ3aW5kb3dzcGhvbmUiLCJ3aW5kb3dzIiwibWFjIiwibGludXgiLCJlZGdlVmVyc2lvbiIsInZlcnNpb25JZGVudGlmaWVyIiwidGFibGV0IiwibW9iaWxlIiwieGJveCIsIm9wZXJhIiwidmVyc2lvbiIsInNhbXN1bmdCcm93c2VyIiwid2hhbGUiLCJtemJyb3dzZXIiLCJjb2FzdCIsImZvY3VzIiwieWFuZGV4YnJvd3NlciIsInVjYnJvd3NlciIsIm1heHRob24iLCJlcGlwaGFueSIsInB1ZmZpbiIsInNsZWlwbmlyIiwia01lbGVvbiIsIm9zbmFtZSIsIm1zZWRnZSIsIm1zaWUiLCJjaHJvbWVCb29rIiwiY2hyb21lIiwidml2YWxkaSIsInNlYW1vbmtleSIsImZpcmVmb3giLCJmaXJlZm94b3MiLCJwaGFudG9tIiwic2xpbWVyIiwiYmxhY2tiZXJyeSIsInRvdWNocGFkIiwiYmFkYSIsInF1cHppbGxhIiwiY2hyb21pdW0iLCJzYWZhcmkiLCJnb29nbGVib3QiLCJibGluayIsIndlYmtpdCIsImdlY2tvIiwiaW9zIiwib3NWZXJzaW9uIiwicyIsImdldFdpbmRvd3NWZXJzaW9uIiwicmVwbGFjZSIsIm9zdmVyc2lvbiIsIm9zTWFqb3JWZXJzaW9uIiwic3BsaXQiLCJjb21wYXJlVmVyc2lvbnMiLCJhIiwiYyIsIngiLCJib3dzZXIiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJnZXRWZXJzaW9uUHJlY2lzaW9uIiwibWFwIiwiYXJyIiwiaXRlcmF0b3IiLCJpIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJjYWxsIiwicHVzaCIsInZlcnNpb25zIiwicHJlY2lzaW9uIiwiTWF0aCIsIm1heCIsImNodW5rcyIsImRlbHRhIiwiam9pbiIsImNodW5rIiwicmV2ZXJzZSIsImlzVW5zdXBwb3J0ZWRCcm93c2VyIiwibWluVmVyc2lvbnMiLCJzdHJpY3RNb2RlIiwiX2Jvd3NlciIsImJyb3dzZXIiLCJoYXNPd25Qcm9wZXJ0eSIsIkVycm9yIiwiU3RyaW5nIiwiYnJvd3Nlckxpc3QiLCJicm93c2VySXRlbSIsImNoZWNrIiwiX2RldGVjdCIsImNvbnNvbGUiLCJsb2ciLCJtYWluTmF2IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYm9keSIsIm9ubG9hZCIsInRvZ2dsZSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJsaW5lIiwibGluZTIiLCJsaW5lMyIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiaGFtYnVyZ2VyIiwibmF2VG9nZ2xlIiwibmF2IiwiZG9Ub2dnbGUiLCJlIiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwialF1ZXJ5IiwicmVhZHkiLCIkIiwiZG9jdW1lbnRFbGVtZW50IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyJdLCJtYXBwaW5ncyI6IkNBTUEsU0FBQUEsRUFBQUMsRUFBQUMsR0FDQSxvQkFBQUMsUUFBQUEsT0FBQUMsUUFBQUQsT0FBQUMsUUFBQUYsSUFDQSxtQkFBQUcsUUFBQUEsT0FBQUMsSUFBQUQsT0FBQUosRUFBQUMsR0FDQUYsRUFBQUMsR0FBQUMsSUFIQSxDQUlBSyxLQUFBLFNBQUEsV0FLQSxJQUFBQyxHQUFBLEVBRUEsU0FBQUMsRUFBQUMsR0FFQSxTQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUFI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QUFFLFlBQUEsWUFJQTVELE9BQUEvQixNQUFBLElBQUErQixPQUFBOUMsUUFDQXdHLEVBQUEsUUFBQUcsU0FBQSxTQUNBN0QsT0FBQWpCLFFBQ0EyRSxFQUFBLFFBQUFHLFNBQUEiLCJmaWxlIjoidGhlbWUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBCb3dzZXIgLSBhIGJyb3dzZXIgZGV0ZWN0b3JcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kZWQvYm93c2VyXG4gKiBNSVQgTGljZW5zZSB8IChjKSBEdXN0aW4gRGlheiAyMDE1XG4gKi9cblxuIWZ1bmN0aW9uIChyb290LCBuYW1lLCBkZWZpbml0aW9uKSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlICE9ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKVxuICBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkgZGVmaW5lKG5hbWUsIGRlZmluaXRpb24pXG4gIGVsc2Ugcm9vdFtuYW1lXSA9IGRlZmluaXRpb24oKVxufSh0aGlzLCAnYm93c2VyJywgZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICAqIFNlZSB1c2VyYWdlbnRzLmpzIGZvciBleGFtcGxlcyBvZiBuYXZpZ2F0b3IudXNlckFnZW50XG4gICAgKi9cblxuICB2YXIgdCA9IHRydWVcblxuICBmdW5jdGlvbiBkZXRlY3QodWEpIHtcblxuICAgIGZ1bmN0aW9uIGdldEZpcnN0TWF0Y2gocmVnZXgpIHtcbiAgICAgIHZhciBtYXRjaCA9IHVhLm1hdGNoKHJlZ2V4KTtcbiAgICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaFsxXSkgfHwgJyc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0U2Vjb25kTWF0Y2gocmVnZXgpIHtcbiAgICAgIHZhciBtYXRjaCA9IHVhLm1hdGNoKHJlZ2V4KTtcbiAgICAgIHJldHVybiAobWF0Y2ggJiYgbWF0Y2gubGVuZ3RoID4gMSAmJiBtYXRjaFsyXSkgfHwgJyc7XG4gICAgfVxuXG4gICAgdmFyIGlvc2RldmljZSA9IGdldEZpcnN0TWF0Y2goLyhpcG9kfGlwaG9uZXxpcGFkKS9pKS50b0xvd2VyQ2FzZSgpXG4gICAgICAsIGxpa2VBbmRyb2lkID0gL2xpa2UgYW5kcm9pZC9pLnRlc3QodWEpXG4gICAgICAsIGFuZHJvaWQgPSAhbGlrZUFuZHJvaWQgJiYgL2FuZHJvaWQvaS50ZXN0KHVhKVxuICAgICAgLCBuZXh1c01vYmlsZSA9IC9uZXh1c1xccypbMC02XVxccyovaS50ZXN0KHVhKVxuICAgICAgLCBuZXh1c1RhYmxldCA9ICFuZXh1c01vYmlsZSAmJiAvbmV4dXNcXHMqWzAtOV0rL2kudGVzdCh1YSlcbiAgICAgICwgY2hyb21lb3MgPSAvQ3JPUy8udGVzdCh1YSlcbiAgICAgICwgc2lsayA9IC9zaWxrL2kudGVzdCh1YSlcbiAgICAgICwgc2FpbGZpc2ggPSAvc2FpbGZpc2gvaS50ZXN0KHVhKVxuICAgICAgLCB0aXplbiA9IC90aXplbi9pLnRlc3QodWEpXG4gICAgICAsIHdlYm9zID0gLyh3ZWJ8aHB3KShvfDApcy9pLnRlc3QodWEpXG4gICAgICAsIHdpbmRvd3NwaG9uZSA9IC93aW5kb3dzIHBob25lL2kudGVzdCh1YSlcbiAgICAgICwgc2Ftc3VuZ0Jyb3dzZXIgPSAvU2Ftc3VuZ0Jyb3dzZXIvaS50ZXN0KHVhKVxuICAgICAgLCB3aW5kb3dzID0gIXdpbmRvd3NwaG9uZSAmJiAvd2luZG93cy9pLnRlc3QodWEpXG4gICAgICAsIG1hYyA9ICFpb3NkZXZpY2UgJiYgIXNpbGsgJiYgL21hY2ludG9zaC9pLnRlc3QodWEpXG4gICAgICAsIGxpbnV4ID0gIWFuZHJvaWQgJiYgIXNhaWxmaXNoICYmICF0aXplbiAmJiAhd2Vib3MgJiYgL2xpbnV4L2kudGVzdCh1YSlcbiAgICAgICwgZWRnZVZlcnNpb24gPSBnZXRTZWNvbmRNYXRjaCgvZWRnKFtlYV18aW9zKVxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgICwgdmVyc2lvbklkZW50aWZpZXIgPSBnZXRGaXJzdE1hdGNoKC92ZXJzaW9uXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgLCB0YWJsZXQgPSAvdGFibGV0L2kudGVzdCh1YSkgJiYgIS90YWJsZXQgcGMvaS50ZXN0KHVhKVxuICAgICAgLCBtb2JpbGUgPSAhdGFibGV0ICYmIC9bXi1dbW9iaS9pLnRlc3QodWEpXG4gICAgICAsIHhib3ggPSAveGJveC9pLnRlc3QodWEpXG4gICAgICAsIHJlc3VsdFxuXG4gICAgaWYgKC9vcGVyYS9pLnRlc3QodWEpKSB7XG4gICAgICAvLyAgYW4gb2xkIE9wZXJhXG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdPcGVyYSdcbiAgICAgICwgb3BlcmE6IHRcbiAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvKD86b3BlcmF8b3ByfG9waW9zKVtcXHNcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoL29wclxcL3xvcGlvcy9pLnRlc3QodWEpKSB7XG4gICAgICAvLyBhIG5ldyBPcGVyYVxuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnT3BlcmEnXG4gICAgICAgICwgb3BlcmE6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpvcHJ8b3Bpb3MpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpIHx8IHZlcnNpb25JZGVudGlmaWVyXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9TYW1zdW5nQnJvd3Nlci9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdTYW1zdW5nIEludGVybmV0IGZvciBBbmRyb2lkJ1xuICAgICAgICAsIHNhbXN1bmdCcm93c2VyOiB0XG4gICAgICAgICwgdmVyc2lvbjogdmVyc2lvbklkZW50aWZpZXIgfHwgZ2V0Rmlyc3RNYXRjaCgvKD86U2Ftc3VuZ0Jyb3dzZXIpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9XaGFsZS9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdOQVZFUiBXaGFsZSBicm93c2VyJ1xuICAgICAgICAsIHdoYWxlOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86d2hhbGUpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL01aQnJvd3Nlci9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdNWiBCcm93c2VyJ1xuICAgICAgICAsIG16YnJvd3NlcjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/Ok1aQnJvd3NlcilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvY29hc3QvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnT3BlcmEgQ29hc3QnXG4gICAgICAgICwgY29hc3Q6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC8oPzpjb2FzdClbXFxzXFwvXShcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL2ZvY3VzL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0ZvY3VzJ1xuICAgICAgICAsIGZvY3VzOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Zm9jdXMpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3lhYnJvd3Nlci9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdZYW5kZXggQnJvd3NlcidcbiAgICAgICwgeWFuZGV4YnJvd3NlcjogdFxuICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC8oPzp5YWJyb3dzZXIpW1xcc1xcL10oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC91Y2Jyb3dzZXIvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgIG5hbWU6ICdVQyBCcm93c2VyJ1xuICAgICAgICAsIHVjYnJvd3NlcjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnVjYnJvd3NlcilbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvbXhpb3MvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnTWF4dGhvbidcbiAgICAgICAgLCBtYXh0aG9uOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86bXhpb3MpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL2VwaXBoYW55L2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0VwaXBoYW55J1xuICAgICAgICAsIGVwaXBoYW55OiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86ZXBpcGhhbnkpW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL3B1ZmZpbi9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdQdWZmaW4nXG4gICAgICAgICwgcHVmZmluOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86cHVmZmluKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9zbGVpcG5pci9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdTbGVpcG5pcidcbiAgICAgICAgLCBzbGVpcG5pcjogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OnNsZWlwbmlyKVtcXHNcXC9dKFxcZCsoPzpcXC5cXGQrKSspL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9rLW1lbGVvbi9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdLLU1lbGVvbidcbiAgICAgICAgLCBrTWVsZW9uOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86ay1tZWxlb24pW1xcc1xcL10oXFxkKyg/OlxcLlxcZCspKykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAod2luZG93c3Bob25lKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdXaW5kb3dzIFBob25lJ1xuICAgICAgLCBvc25hbWU6ICdXaW5kb3dzIFBob25lJ1xuICAgICAgLCB3aW5kb3dzcGhvbmU6IHRcbiAgICAgIH1cbiAgICAgIGlmIChlZGdlVmVyc2lvbikge1xuICAgICAgICByZXN1bHQubXNlZGdlID0gdFxuICAgICAgICByZXN1bHQudmVyc2lvbiA9IGVkZ2VWZXJzaW9uXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmVzdWx0Lm1zaWUgPSB0XG4gICAgICAgIHJlc3VsdC52ZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvaWVtb2JpbGVcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9tc2llfHRyaWRlbnQvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnSW50ZXJuZXQgRXhwbG9yZXInXG4gICAgICAsIG1zaWU6IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86bXNpZSB8cnY6KShcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNocm9tZW9zKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdDaHJvbWUnXG4gICAgICAsIG9zbmFtZTogJ0Nocm9tZSBPUydcbiAgICAgICwgY2hyb21lb3M6IHRcbiAgICAgICwgY2hyb21lQm9vazogdFxuICAgICAgLCBjaHJvbWU6IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86Y2hyb21lfGNyaW9zfGNybW8pXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoL2VkZyhbZWFdfGlvcykvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnTWljcm9zb2Z0IEVkZ2UnXG4gICAgICAsIG1zZWRnZTogdFxuICAgICAgLCB2ZXJzaW9uOiBlZGdlVmVyc2lvblxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvdml2YWxkaS9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdWaXZhbGRpJ1xuICAgICAgICAsIHZpdmFsZGk6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC92aXZhbGRpXFwvKFxcZCsoXFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChzYWlsZmlzaCkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnU2FpbGZpc2gnXG4gICAgICAsIG9zbmFtZTogJ1NhaWxmaXNoIE9TJ1xuICAgICAgLCBzYWlsZmlzaDogdFxuICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9zYWlsZmlzaFxccz9icm93c2VyXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvc2VhbW9ua2V5XFwvL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1NlYU1vbmtleSdcbiAgICAgICwgc2VhbW9ua2V5OiB0XG4gICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goL3NlYW1vbmtleVxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoL2ZpcmVmb3h8aWNld2Vhc2VsfGZ4aW9zL2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ0ZpcmVmb3gnXG4gICAgICAsIGZpcmVmb3g6IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvKD86ZmlyZWZveHxpY2V3ZWFzZWx8Znhpb3MpWyBcXC9dKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgICAgaWYgKC9cXCgobW9iaWxlfHRhYmxldCk7W15cXCldKnJ2OltcXGRcXC5dK1xcKS9pLnRlc3QodWEpKSB7XG4gICAgICAgIHJlc3VsdC5maXJlZm94b3MgPSB0XG4gICAgICAgIHJlc3VsdC5vc25hbWUgPSAnRmlyZWZveCBPUydcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoc2lsaykge1xuICAgICAgcmVzdWx0ID0gIHtcbiAgICAgICAgbmFtZTogJ0FtYXpvbiBTaWxrJ1xuICAgICAgLCBzaWxrOiB0XG4gICAgICAsIHZlcnNpb24gOiBnZXRGaXJzdE1hdGNoKC9zaWxrXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvcGhhbnRvbS9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdQaGFudG9tSlMnXG4gICAgICAsIHBoYW50b206IHRcbiAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvcGhhbnRvbWpzXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvc2xpbWVyanMvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnU2xpbWVySlMnXG4gICAgICAgICwgc2xpbWVyOiB0XG4gICAgICAgICwgdmVyc2lvbjogZ2V0Rmlyc3RNYXRjaCgvc2xpbWVyanNcXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKC9ibGFja2JlcnJ5fFxcYmJiXFxkKy9pLnRlc3QodWEpIHx8IC9yaW1cXHN0YWJsZXQvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnQmxhY2tCZXJyeSdcbiAgICAgICwgb3NuYW1lOiAnQmxhY2tCZXJyeSBPUydcbiAgICAgICwgYmxhY2tiZXJyeTogdFxuICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC9ibGFja2JlcnJ5W1xcZF0rXFwvKFxcZCsoXFwuXFxkKyk/KS9pKVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh3ZWJvcykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnV2ViT1MnXG4gICAgICAsIG9zbmFtZTogJ1dlYk9TJ1xuICAgICAgLCB3ZWJvczogdFxuICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllciB8fCBnZXRGaXJzdE1hdGNoKC93KD86ZWIpP29zYnJvd3NlclxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH07XG4gICAgICAvdG91Y2hwYWRcXC8vaS50ZXN0KHVhKSAmJiAocmVzdWx0LnRvdWNocGFkID0gdClcbiAgICB9XG4gICAgZWxzZSBpZiAoL2JhZGEvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnQmFkYSdcbiAgICAgICwgb3NuYW1lOiAnQmFkYSdcbiAgICAgICwgYmFkYTogdFxuICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9kb2xmaW5cXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICh0aXplbikge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnVGl6ZW4nXG4gICAgICAsIG9zbmFtZTogJ1RpemVuJ1xuICAgICAgLCB0aXplbjogdFxuICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzp0aXplblxccz8pP2Jyb3dzZXJcXC8oXFxkKyhcXC5cXGQrKT8pL2kpIHx8IHZlcnNpb25JZGVudGlmaWVyXG4gICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmICgvcXVwemlsbGEvaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnUXVwWmlsbGEnXG4gICAgICAgICwgcXVwemlsbGE6IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpxdXB6aWxsYSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKykrKS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvY2hyb21pdW0vaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnQ2hyb21pdW0nXG4gICAgICAgICwgY2hyb21pdW06IHRcbiAgICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC8oPzpjaHJvbWl1bSlbXFxzXFwvXShcXGQrKD86XFwuXFxkKyk/KS9pKSB8fCB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvY2hyb21lfGNyaW9zfGNybW8vaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnQ2hyb21lJ1xuICAgICAgICAsIGNocm9tZTogdFxuICAgICAgICAsIHZlcnNpb246IGdldEZpcnN0TWF0Y2goLyg/OmNocm9tZXxjcmlvc3xjcm1vKVxcLyhcXGQrKFxcLlxcZCspPykvaSlcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoYW5kcm9pZCkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBuYW1lOiAnQW5kcm9pZCdcbiAgICAgICAgLCB2ZXJzaW9uOiB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgvc2FmYXJpfGFwcGxld2Via2l0L2kudGVzdCh1YSkpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZTogJ1NhZmFyaSdcbiAgICAgICwgc2FmYXJpOiB0XG4gICAgICB9XG4gICAgICBpZiAodmVyc2lvbklkZW50aWZpZXIpIHtcbiAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpb3NkZXZpY2UpIHtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgbmFtZSA6IGlvc2RldmljZSA9PSAnaXBob25lJyA/ICdpUGhvbmUnIDogaW9zZGV2aWNlID09ICdpcGFkJyA/ICdpUGFkJyA6ICdpUG9kJ1xuICAgICAgfVxuICAgICAgLy8gV1RGOiB2ZXJzaW9uIGlzIG5vdCBwYXJ0IG9mIHVzZXIgYWdlbnQgaW4gd2ViIGFwcHNcbiAgICAgIGlmICh2ZXJzaW9uSWRlbnRpZmllcikge1xuICAgICAgICByZXN1bHQudmVyc2lvbiA9IHZlcnNpb25JZGVudGlmaWVyXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYoL2dvb2dsZWJvdC9pLnRlc3QodWEpKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6ICdHb29nbGVib3QnXG4gICAgICAsIGdvb2dsZWJvdDogdFxuICAgICAgLCB2ZXJzaW9uOiBnZXRGaXJzdE1hdGNoKC9nb29nbGVib3RcXC8oXFxkKyhcXC5cXGQrKSkvaSkgfHwgdmVyc2lvbklkZW50aWZpZXJcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIG5hbWU6IGdldEZpcnN0TWF0Y2goL14oLiopXFwvKC4qKSAvKSxcbiAgICAgICAgdmVyc2lvbjogZ2V0U2Vjb25kTWF0Y2goL14oLiopXFwvKC4qKSAvKVxuICAgICB9O1xuICAgfVxuXG4gICAgLy8gc2V0IHdlYmtpdCBvciBnZWNrbyBmbGFnIGZvciBicm93c2VycyBiYXNlZCBvbiB0aGVzZSBlbmdpbmVzXG4gICAgaWYgKCFyZXN1bHQubXNlZGdlICYmIC8oYXBwbGUpP3dlYmtpdC9pLnRlc3QodWEpKSB7XG4gICAgICBpZiAoLyhhcHBsZSk/d2Via2l0XFwvNTM3XFwuMzYvaS50ZXN0KHVhKSkge1xuICAgICAgICByZXN1bHQubmFtZSA9IHJlc3VsdC5uYW1lIHx8IFwiQmxpbmtcIlxuICAgICAgICByZXN1bHQuYmxpbmsgPSB0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQubmFtZSA9IHJlc3VsdC5uYW1lIHx8IFwiV2Via2l0XCJcbiAgICAgICAgcmVzdWx0LndlYmtpdCA9IHRcbiAgICAgIH1cbiAgICAgIGlmICghcmVzdWx0LnZlcnNpb24gJiYgdmVyc2lvbklkZW50aWZpZXIpIHtcbiAgICAgICAgcmVzdWx0LnZlcnNpb24gPSB2ZXJzaW9uSWRlbnRpZmllclxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIXJlc3VsdC5vcGVyYSAmJiAvZ2Vja29cXC8vaS50ZXN0KHVhKSkge1xuICAgICAgcmVzdWx0Lm5hbWUgPSByZXN1bHQubmFtZSB8fCBcIkdlY2tvXCJcbiAgICAgIHJlc3VsdC5nZWNrbyA9IHRcbiAgICAgIHJlc3VsdC52ZXJzaW9uID0gcmVzdWx0LnZlcnNpb24gfHwgZ2V0Rmlyc3RNYXRjaCgvZ2Vja29cXC8oXFxkKyhcXC5cXGQrKT8pL2kpXG4gICAgfVxuXG4gICAgLy8gc2V0IE9TIGZsYWdzIGZvciBwbGF0Zm9ybXMgdGhhdCBoYXZlIG11bHRpcGxlIGJyb3dzZXJzXG4gICAgaWYgKCFyZXN1bHQud2luZG93c3Bob25lICYmIChhbmRyb2lkIHx8IHJlc3VsdC5zaWxrKSkge1xuICAgICAgcmVzdWx0LmFuZHJvaWQgPSB0XG4gICAgICByZXN1bHQub3NuYW1lID0gJ0FuZHJvaWQnXG4gICAgfSBlbHNlIGlmICghcmVzdWx0LndpbmRvd3NwaG9uZSAmJiBpb3NkZXZpY2UpIHtcbiAgICAgIHJlc3VsdFtpb3NkZXZpY2VdID0gdFxuICAgICAgcmVzdWx0LmlvcyA9IHRcbiAgICAgIHJlc3VsdC5vc25hbWUgPSAnaU9TJ1xuICAgIH0gZWxzZSBpZiAobWFjKSB7XG4gICAgICByZXN1bHQubWFjID0gdFxuICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdtYWNPUydcbiAgICB9IGVsc2UgaWYgKHhib3gpIHtcbiAgICAgIHJlc3VsdC54Ym94ID0gdFxuICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdYYm94J1xuICAgIH0gZWxzZSBpZiAod2luZG93cykge1xuICAgICAgcmVzdWx0LndpbmRvd3MgPSB0XG4gICAgICByZXN1bHQub3NuYW1lID0gJ1dpbmRvd3MnXG4gICAgfSBlbHNlIGlmIChsaW51eCkge1xuICAgICAgcmVzdWx0LmxpbnV4ID0gdFxuICAgICAgcmVzdWx0Lm9zbmFtZSA9ICdMaW51eCdcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRXaW5kb3dzVmVyc2lvbiAocykge1xuICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgIGNhc2UgJ05UJzogcmV0dXJuICdOVCdcbiAgICAgICAgY2FzZSAnWFAnOiByZXR1cm4gJ1hQJ1xuICAgICAgICBjYXNlICdOVCA1LjAnOiByZXR1cm4gJzIwMDAnXG4gICAgICAgIGNhc2UgJ05UIDUuMSc6IHJldHVybiAnWFAnXG4gICAgICAgIGNhc2UgJ05UIDUuMic6IHJldHVybiAnMjAwMydcbiAgICAgICAgY2FzZSAnTlQgNi4wJzogcmV0dXJuICdWaXN0YSdcbiAgICAgICAgY2FzZSAnTlQgNi4xJzogcmV0dXJuICc3J1xuICAgICAgICBjYXNlICdOVCA2LjInOiByZXR1cm4gJzgnXG4gICAgICAgIGNhc2UgJ05UIDYuMyc6IHJldHVybiAnOC4xJ1xuICAgICAgICBjYXNlICdOVCAxMC4wJzogcmV0dXJuICcxMCdcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE9TIHZlcnNpb24gZXh0cmFjdGlvblxuICAgIHZhciBvc1ZlcnNpb24gPSAnJztcbiAgICBpZiAocmVzdWx0LndpbmRvd3MpIHtcbiAgICAgIG9zVmVyc2lvbiA9IGdldFdpbmRvd3NWZXJzaW9uKGdldEZpcnN0TWF0Y2goL1dpbmRvd3MgKChOVHxYUCkoIFxcZFxcZD8uXFxkKT8pL2kpKVxuICAgIH0gZWxzZSBpZiAocmVzdWx0LndpbmRvd3NwaG9uZSkge1xuICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvd2luZG93cyBwaG9uZSAoPzpvcyk/XFxzPyhcXGQrKFxcLlxcZCspKikvaSk7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQubWFjKSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9NYWMgT1MgWCAoXFxkKyhbX1xcLlxcc11cXGQrKSopL2kpO1xuICAgICAgb3NWZXJzaW9uID0gb3NWZXJzaW9uLnJlcGxhY2UoL1tfXFxzXS9nLCAnLicpO1xuICAgIH0gZWxzZSBpZiAoaW9zZGV2aWNlKSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9vcyAoXFxkKyhbX1xcc11cXGQrKSopIGxpa2UgbWFjIG9zIHgvaSk7XG4gICAgICBvc1ZlcnNpb24gPSBvc1ZlcnNpb24ucmVwbGFjZSgvW19cXHNdL2csICcuJyk7XG4gICAgfSBlbHNlIGlmIChhbmRyb2lkKSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9hbmRyb2lkWyBcXC8tXShcXGQrKFxcLlxcZCspKikvaSk7XG4gICAgfSBlbHNlIGlmIChyZXN1bHQud2Vib3MpIHtcbiAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goLyg/OndlYnxocHcpb3NcXC8oXFxkKyhcXC5cXGQrKSopL2kpO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0LmJsYWNrYmVycnkpIHtcbiAgICAgIG9zVmVyc2lvbiA9IGdldEZpcnN0TWF0Y2goL3JpbVxcc3RhYmxldFxcc29zXFxzKFxcZCsoXFwuXFxkKykqKS9pKTtcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC5iYWRhKSB7XG4gICAgICBvc1ZlcnNpb24gPSBnZXRGaXJzdE1hdGNoKC9iYWRhXFwvKFxcZCsoXFwuXFxkKykqKS9pKTtcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC50aXplbikge1xuICAgICAgb3NWZXJzaW9uID0gZ2V0Rmlyc3RNYXRjaCgvdGl6ZW5bXFwvXFxzXShcXGQrKFxcLlxcZCspKikvaSk7XG4gICAgfVxuICAgIGlmIChvc1ZlcnNpb24pIHtcbiAgICAgIHJlc3VsdC5vc3ZlcnNpb24gPSBvc1ZlcnNpb247XG4gICAgfVxuXG4gICAgLy8gZGV2aWNlIHR5cGUgZXh0cmFjdGlvblxuICAgIHZhciBvc01ham9yVmVyc2lvbiA9ICFyZXN1bHQud2luZG93cyAmJiBvc1ZlcnNpb24uc3BsaXQoJy4nKVswXTtcbiAgICBpZiAoXG4gICAgICAgICB0YWJsZXRcbiAgICAgIHx8IG5leHVzVGFibGV0XG4gICAgICB8fCBpb3NkZXZpY2UgPT0gJ2lwYWQnXG4gICAgICB8fCAoYW5kcm9pZCAmJiAob3NNYWpvclZlcnNpb24gPT0gMyB8fCAob3NNYWpvclZlcnNpb24gPj0gNCAmJiAhbW9iaWxlKSkpXG4gICAgICB8fCByZXN1bHQuc2lsa1xuICAgICkge1xuICAgICAgcmVzdWx0LnRhYmxldCA9IHRcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgbW9iaWxlXG4gICAgICB8fCBpb3NkZXZpY2UgPT0gJ2lwaG9uZSdcbiAgICAgIHx8IGlvc2RldmljZSA9PSAnaXBvZCdcbiAgICAgIHx8IGFuZHJvaWRcbiAgICAgIHx8IG5leHVzTW9iaWxlXG4gICAgICB8fCByZXN1bHQuYmxhY2tiZXJyeVxuICAgICAgfHwgcmVzdWx0LndlYm9zXG4gICAgICB8fCByZXN1bHQuYmFkYVxuICAgICkge1xuICAgICAgcmVzdWx0Lm1vYmlsZSA9IHRcbiAgICB9XG5cbiAgICAvLyBHcmFkZWQgQnJvd3NlciBTdXBwb3J0XG4gICAgLy8gaHR0cDovL2RldmVsb3Blci55YWhvby5jb20veXVpL2FydGljbGVzL2dic1xuICAgIGlmIChyZXN1bHQubXNlZGdlIHx8XG4gICAgICAgIChyZXN1bHQubXNpZSAmJiByZXN1bHQudmVyc2lvbiA+PSAxMCkgfHxcbiAgICAgICAgKHJlc3VsdC55YW5kZXhicm93c2VyICYmIHJlc3VsdC52ZXJzaW9uID49IDE1KSB8fFxuXHRcdCAgICAocmVzdWx0LnZpdmFsZGkgJiYgcmVzdWx0LnZlcnNpb24gPj0gMS4wKSB8fFxuICAgICAgICAocmVzdWx0LmNocm9tZSAmJiByZXN1bHQudmVyc2lvbiA+PSAyMCkgfHxcbiAgICAgICAgKHJlc3VsdC5zYW1zdW5nQnJvd3NlciAmJiByZXN1bHQudmVyc2lvbiA+PSA0KSB8fFxuICAgICAgICAocmVzdWx0LndoYWxlICYmIGNvbXBhcmVWZXJzaW9ucyhbcmVzdWx0LnZlcnNpb24sICcxLjAnXSkgPT09IDEpIHx8XG4gICAgICAgIChyZXN1bHQubXpicm93c2VyICYmIGNvbXBhcmVWZXJzaW9ucyhbcmVzdWx0LnZlcnNpb24sICc2LjAnXSkgPT09IDEpIHx8XG4gICAgICAgIChyZXN1bHQuZm9jdXMgJiYgY29tcGFyZVZlcnNpb25zKFtyZXN1bHQudmVyc2lvbiwgJzEuMCddKSA9PT0gMSkgfHxcbiAgICAgICAgKHJlc3VsdC5maXJlZm94ICYmIHJlc3VsdC52ZXJzaW9uID49IDIwLjApIHx8XG4gICAgICAgIChyZXN1bHQuc2FmYXJpICYmIHJlc3VsdC52ZXJzaW9uID49IDYpIHx8XG4gICAgICAgIChyZXN1bHQub3BlcmEgJiYgcmVzdWx0LnZlcnNpb24gPj0gMTAuMCkgfHxcbiAgICAgICAgKHJlc3VsdC5pb3MgJiYgcmVzdWx0Lm9zdmVyc2lvbiAmJiByZXN1bHQub3N2ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSA+PSA2KSB8fFxuICAgICAgICAocmVzdWx0LmJsYWNrYmVycnkgJiYgcmVzdWx0LnZlcnNpb24gPj0gMTAuMSlcbiAgICAgICAgfHwgKHJlc3VsdC5jaHJvbWl1bSAmJiByZXN1bHQudmVyc2lvbiA+PSAyMClcbiAgICAgICAgKSB7XG4gICAgICByZXN1bHQuYSA9IHQ7XG4gICAgfVxuICAgIGVsc2UgaWYgKChyZXN1bHQubXNpZSAmJiByZXN1bHQudmVyc2lvbiA8IDEwKSB8fFxuICAgICAgICAocmVzdWx0LmNocm9tZSAmJiByZXN1bHQudmVyc2lvbiA8IDIwKSB8fFxuICAgICAgICAocmVzdWx0LmZpcmVmb3ggJiYgcmVzdWx0LnZlcnNpb24gPCAyMC4wKSB8fFxuICAgICAgICAocmVzdWx0LnNhZmFyaSAmJiByZXN1bHQudmVyc2lvbiA8IDYpIHx8XG4gICAgICAgIChyZXN1bHQub3BlcmEgJiYgcmVzdWx0LnZlcnNpb24gPCAxMC4wKSB8fFxuICAgICAgICAocmVzdWx0LmlvcyAmJiByZXN1bHQub3N2ZXJzaW9uICYmIHJlc3VsdC5vc3ZlcnNpb24uc3BsaXQoXCIuXCIpWzBdIDwgNilcbiAgICAgICAgfHwgKHJlc3VsdC5jaHJvbWl1bSAmJiByZXN1bHQudmVyc2lvbiA8IDIwKVxuICAgICAgICApIHtcbiAgICAgIHJlc3VsdC5jID0gdFxuICAgIH0gZWxzZSByZXN1bHQueCA9IHRcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIHZhciBib3dzZXIgPSBkZXRlY3QodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IHx8ICcnIDogJycpXG5cbiAgYm93c2VyLnRlc3QgPSBmdW5jdGlvbiAoYnJvd3Nlckxpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJyb3dzZXJMaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICB2YXIgYnJvd3Nlckl0ZW0gPSBicm93c2VyTGlzdFtpXTtcbiAgICAgIGlmICh0eXBlb2YgYnJvd3Nlckl0ZW09PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKGJyb3dzZXJJdGVtIGluIGJvd3Nlcikge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdmVyc2lvbiBwcmVjaXNpb25zIGNvdW50XG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgZ2V0VmVyc2lvblByZWNpc2lvbihcIjEuMTAuM1wiKSAvLyAzXG4gICAqXG4gICAqIEBwYXJhbSAge3N0cmluZ30gdmVyc2lvblxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb24pIHtcbiAgICByZXR1cm4gdmVyc2lvbi5zcGxpdChcIi5cIikubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIEFycmF5OjptYXAgcG9seWZpbGxcbiAgICpcbiAgICogQHBhcmFtICB7QXJyYXl9IGFyclxuICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaXRlcmF0b3JcbiAgICogQHJldHVybiB7QXJyYXl9XG4gICAqL1xuICBmdW5jdGlvbiBtYXAoYXJyLCBpdGVyYXRvcikge1xuICAgIHZhciByZXN1bHQgPSBbXSwgaTtcbiAgICBpZiAoQXJyYXkucHJvdG90eXBlLm1hcCkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChhcnIsIGl0ZXJhdG9yKTtcbiAgICB9XG4gICAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgcmVzdWx0LnB1c2goaXRlcmF0b3IoYXJyW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIGJyb3dzZXIgdmVyc2lvbiB3ZWlnaHRcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjEwLjIuMScsICAnMS44LjIuMS45MCddKSAgICAvLyAxXG4gICAqICAgY29tcGFyZVZlcnNpb25zKFsnMS4wMTAuMi4xJywgJzEuMDkuMi4xLjkwJ10pOyAgLy8gMVxuICAgKiAgIGNvbXBhcmVWZXJzaW9ucyhbJzEuMTAuMi4xJywgICcxLjEwLjIuMSddKTsgICAgIC8vIDBcbiAgICogICBjb21wYXJlVmVyc2lvbnMoWycxLjEwLjIuMScsICAnMS4wODAwLjInXSk7ICAgICAvLyAtMVxuICAgKlxuICAgKiBAcGFyYW0gIHtBcnJheTxTdHJpbmc+fSB2ZXJzaW9ucyB2ZXJzaW9ucyB0byBjb21wYXJlXG4gICAqIEByZXR1cm4ge051bWJlcn0gY29tcGFyaXNvbiByZXN1bHRcbiAgICovXG4gIGZ1bmN0aW9uIGNvbXBhcmVWZXJzaW9ucyh2ZXJzaW9ucykge1xuICAgIC8vIDEpIGdldCBjb21tb24gcHJlY2lzaW9uIGZvciBib3RoIHZlcnNpb25zLCBmb3IgZXhhbXBsZSBmb3IgXCIxMC4wXCIgYW5kIFwiOVwiIGl0IHNob3VsZCBiZSAyXG4gICAgdmFyIHByZWNpc2lvbiA9IE1hdGgubWF4KGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbnNbMF0pLCBnZXRWZXJzaW9uUHJlY2lzaW9uKHZlcnNpb25zWzFdKSk7XG4gICAgdmFyIGNodW5rcyA9IG1hcCh2ZXJzaW9ucywgZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgIHZhciBkZWx0YSA9IHByZWNpc2lvbiAtIGdldFZlcnNpb25QcmVjaXNpb24odmVyc2lvbik7XG5cbiAgICAgIC8vIDIpIFwiOVwiIC0+IFwiOS4wXCIgKGZvciBwcmVjaXNpb24gPSAyKVxuICAgICAgdmVyc2lvbiA9IHZlcnNpb24gKyBuZXcgQXJyYXkoZGVsdGEgKyAxKS5qb2luKFwiLjBcIik7XG5cbiAgICAgIC8vIDMpIFwiOS4wXCIgLT4gW1wiMDAwMDAwMDAwXCJcIiwgXCIwMDAwMDAwMDlcIl1cbiAgICAgIHJldHVybiBtYXAodmVyc2lvbi5zcGxpdChcIi5cIiksIGZ1bmN0aW9uIChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5KDIwIC0gY2h1bmsubGVuZ3RoKS5qb2luKFwiMFwiKSArIGNodW5rO1xuICAgICAgfSkucmV2ZXJzZSgpO1xuICAgIH0pO1xuXG4gICAgLy8gaXRlcmF0ZSBpbiByZXZlcnNlIG9yZGVyIGJ5IHJldmVyc2VkIGNodW5rcyBhcnJheVxuICAgIHdoaWxlICgtLXByZWNpc2lvbiA+PSAwKSB7XG4gICAgICAvLyA0KSBjb21wYXJlOiBcIjAwMDAwMDAwOVwiID4gXCIwMDAwMDAwMTBcIiA9IGZhbHNlIChidXQgXCI5XCIgPiBcIjEwXCIgPSB0cnVlKVxuICAgICAgaWYgKGNodW5rc1swXVtwcmVjaXNpb25dID4gY2h1bmtzWzFdW3ByZWNpc2lvbl0pIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChjaHVua3NbMF1bcHJlY2lzaW9uXSA9PT0gY2h1bmtzWzFdW3ByZWNpc2lvbl0pIHtcbiAgICAgICAgaWYgKHByZWNpc2lvbiA9PT0gMCkge1xuICAgICAgICAgIC8vIGFsbCB2ZXJzaW9uIGNodW5rcyBhcmUgc2FtZVxuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBicm93c2VyIGlzIHVuc3VwcG9ydGVkXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAgYm93c2VyLmlzVW5zdXBwb3J0ZWRCcm93c2VyKHtcbiAgICogICAgIG1zaWU6IFwiMTBcIixcbiAgICogICAgIGZpcmVmb3g6IFwiMjNcIixcbiAgICogICAgIGNocm9tZTogXCIyOVwiLFxuICAgKiAgICAgc2FmYXJpOiBcIjUuMVwiLFxuICAgKiAgICAgb3BlcmE6IFwiMTZcIixcbiAgICogICAgIHBoYW50b206IFwiNTM0XCJcbiAgICogICB9KTtcbiAgICpcbiAgICogQHBhcmFtICB7T2JqZWN0fSAgbWluVmVyc2lvbnMgbWFwIG9mIG1pbmltYWwgdmVyc2lvbiB0byBicm93c2VyXG4gICAqIEBwYXJhbSAge0Jvb2xlYW59IFtzdHJpY3RNb2RlID0gZmFsc2VdIGZsYWcgdG8gcmV0dXJuIGZhbHNlIGlmIGJyb3dzZXIgd2Fzbid0IGZvdW5kIGluIG1hcFxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBbdWFdIHVzZXIgYWdlbnQgc3RyaW5nXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBmdW5jdGlvbiBpc1Vuc3VwcG9ydGVkQnJvd3NlcihtaW5WZXJzaW9ucywgc3RyaWN0TW9kZSwgdWEpIHtcbiAgICB2YXIgX2Jvd3NlciA9IGJvd3NlcjtcblxuICAgIC8vIG1ha2Ugc3RyaWN0TW9kZSBwYXJhbSBvcHRpb25hbCB3aXRoIHVhIHBhcmFtIHVzYWdlXG4gICAgaWYgKHR5cGVvZiBzdHJpY3RNb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgdWEgPSBzdHJpY3RNb2RlO1xuICAgICAgc3RyaWN0TW9kZSA9IHZvaWQoMCk7XG4gICAgfVxuXG4gICAgaWYgKHN0cmljdE1vZGUgPT09IHZvaWQoMCkpIHtcbiAgICAgIHN0cmljdE1vZGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHVhKSB7XG4gICAgICBfYm93c2VyID0gZGV0ZWN0KHVhKTtcbiAgICB9XG5cbiAgICB2YXIgdmVyc2lvbiA9IFwiXCIgKyBfYm93c2VyLnZlcnNpb247XG4gICAgZm9yICh2YXIgYnJvd3NlciBpbiBtaW5WZXJzaW9ucykge1xuICAgICAgaWYgKG1pblZlcnNpb25zLmhhc093blByb3BlcnR5KGJyb3dzZXIpKSB7XG4gICAgICAgIGlmIChfYm93c2VyW2Jyb3dzZXJdKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBtaW5WZXJzaW9uc1ticm93c2VyXSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQnJvd3NlciB2ZXJzaW9uIGluIHRoZSBtaW5WZXJzaW9uIG1hcCBzaG91bGQgYmUgYSBzdHJpbmc6ICcgKyBicm93c2VyICsgJzogJyArIFN0cmluZyhtaW5WZXJzaW9ucykpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGJyb3dzZXIgdmVyc2lvbiBhbmQgbWluIHN1cHBvcnRlZCB2ZXJzaW9uLlxuICAgICAgICAgIHJldHVybiBjb21wYXJlVmVyc2lvbnMoW3ZlcnNpb24sIG1pblZlcnNpb25zW2Jyb3dzZXJdXSkgPCAwO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0cmljdE1vZGU7IC8vIG5vdCBmb3VuZFxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGJyb3dzZXIgaXMgc3VwcG9ydGVkXG4gICAqXG4gICAqIEBwYXJhbSAge09iamVjdH0gbWluVmVyc2lvbnMgbWFwIG9mIG1pbmltYWwgdmVyc2lvbiB0byBicm93c2VyXG4gICAqIEBwYXJhbSAge0Jvb2xlYW59IFtzdHJpY3RNb2RlID0gZmFsc2VdIGZsYWcgdG8gcmV0dXJuIGZhbHNlIGlmIGJyb3dzZXIgd2Fzbid0IGZvdW5kIGluIG1hcFxuICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBbdWFdIHVzZXIgYWdlbnQgc3RyaW5nXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuICBmdW5jdGlvbiBjaGVjayhtaW5WZXJzaW9ucywgc3RyaWN0TW9kZSwgdWEpIHtcbiAgICByZXR1cm4gIWlzVW5zdXBwb3J0ZWRCcm93c2VyKG1pblZlcnNpb25zLCBzdHJpY3RNb2RlLCB1YSk7XG4gIH1cblxuICBib3dzZXIuaXNVbnN1cHBvcnRlZEJyb3dzZXIgPSBpc1Vuc3VwcG9ydGVkQnJvd3NlcjtcbiAgYm93c2VyLmNvbXBhcmVWZXJzaW9ucyA9IGNvbXBhcmVWZXJzaW9ucztcbiAgYm93c2VyLmNoZWNrID0gY2hlY2s7XG5cbiAgLypcbiAgICogU2V0IG91ciBkZXRlY3QgbWV0aG9kIHRvIHRoZSBtYWluIGJvd3NlciBvYmplY3Qgc28gd2UgY2FuXG4gICAqIHJldXNlIGl0IHRvIHRlc3Qgb3RoZXIgdXNlciBhZ2VudHMuXG4gICAqIFRoaXMgaXMgbmVlZGVkIHRvIGltcGxlbWVudCBmdXR1cmUgdGVzdHMuXG4gICAqL1xuICBib3dzZXIuX2RldGVjdCA9IGRldGVjdDtcblxuICAvKlxuICAgKiBTZXQgb3VyIGRldGVjdCBwdWJsaWMgbWV0aG9kIHRvIHRoZSBtYWluIGJvd3NlciBvYmplY3RcbiAgICogVGhpcyBpcyBuZWVkZWQgdG8gaW1wbGVtZW50IGJvd3NlciBpbiBzZXJ2ZXIgc2lkZVxuICAgKi9cbiAgYm93c2VyLmRldGVjdCA9IGRldGVjdDtcbiAgcmV0dXJuIGJvd3NlclxufSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKFwibWVudSBoYXMgbG9hZGVkXCIpO1xuXG4gIHZhciBtYWluTmF2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXItLW1lbnUgPiAubWVudVwiKTtcblxuICBkb2N1bWVudC5ib2R5Lm9ubG9hZCA9IGFkZEVsZW1lbnQ7XG5cbiAgZnVuY3Rpb24gYWRkRWxlbWVudCgpIHtcbiAgICAvLyBjcmVhdGUgYSBuZXcgZGl2IGVsZW1lbnRcbiAgICB2YXIgdG9nZ2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0b2dnbGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJuYXYtdG9nZ2xlXCIpO1xuXG4gICAgLy8gYW5kIGdpdmUgaXQgaW50ZXJuYWwgY29udGVudFxuICAgIHZhciBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibGluZVwiKTtcbiAgICB2YXIgbGluZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxpbmUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJsaW5lXCIpO1xuICAgIHZhciBsaW5lMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImxpbmVcIik7XG5cbiAgICAvLyBhZGQgdGhlIGxpbmVzIHRvIHRoZSBuZXdseSBjcmVhdGVkIGRpdlxuICAgIHRvZ2dsZS5hcHBlbmRDaGlsZChsaW5lKTtcbiAgICB0b2dnbGUuYXBwZW5kQ2hpbGQobGluZTIpO1xuICAgIHRvZ2dsZS5hcHBlbmRDaGlsZChsaW5lMyk7XG5cbiAgICAvLyBhZGQgdGhlIG5ld2x5IGNyZWF0ZWQgZWxlbWVudCBhbmQgaXRzIGNvbnRlbnQgaW50byB0aGUgRE9NXG4gICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUodG9nZ2xlLCBtYWluTmF2KTtcbiAgfVxuXG4gIHZhciBoYW1idXJnZXIgPSB7XG4gICAgbmF2VG9nZ2xlOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5hdi10b2dnbGVcIiksXG4gICAgbmF2OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibmF2XCIpLFxuXG4gICAgZG9Ub2dnbGU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMubmF2VG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoXCJleHBhbmRlZFwiKTtcbiAgICAgIHRoaXMubmF2LmNsYXNzTGlzdC50b2dnbGUoXCJleHBhbmRlZFwiKTtcbiAgICB9XG4gIH07XG5cbiAgaGFtYnVyZ2VyLm5hdlRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuICAgIGhhbWJ1cmdlci5kb1RvZ2dsZShlKTtcbiAgfSk7XG4gIGhhbWJ1cmdlci5uYXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBoYW1idXJnZXIuZG9Ub2dnbGUoZSk7XG4gIH0pO1xufSkoKTtcbiIsImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuICAvLyBJbnNpZGUgb2YgdGhpcyBmdW5jdGlvbiwgJCgpIHdpbGwgd29yayBhcyBhbiBhbGlhcyBmb3IgalF1ZXJ5KClcbiAgLy8gYW5kIG90aGVyIGxpYnJhcmllcyBhbHNvIHVzaW5nICQgd2lsbCBub3QgYmUgYWNjZXNzaWJsZSB1bmRlciB0aGlzIHNob3J0Y3V0XG4gIC8vIGh0dHBzOi8vY29kZXgud29yZHByZXNzLm9yZy9GdW5jdGlvbl9SZWZlcmVuY2Uvd3BfZW5xdWV1ZV9zY3JpcHQjalF1ZXJ5X25vQ29uZmxpY3RfV3JhcHBlcnNcblxuICAvLyBUb3VjaCBEZXZpY2UgRGV0ZWN0aW9uXG4gIHZhciBpc1RvdWNoRGV2aWNlID0gXCJvbnRvdWNoc3RhcnRcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIGlmIChpc1RvdWNoRGV2aWNlKSB7XG4gICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJuby10b3VjaFwiKTtcbiAgfVxuXG4gIC8vIEJyb3dzZXIgZGV0ZWN0aW9uIHZpYSBCb3dzZXIgKGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5jZWRpa3Nvbi9ib3dzZXIpIC0gYWRkIGRldGVjdGlvbiBhcyBuZWVkZWRcbiAgaWYgKGJvd3Nlci5tc2llICYmIGJvd3Nlci52ZXJzaW9uID09IDExKSB7XG4gICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJpZS0xMVwiKTtcbiAgfSBlbHNlIGlmIChib3dzZXIuc2FmYXJpKSB7XG4gICAgJChcImJvZHlcIikuYWRkQ2xhc3MoXCJzYWZhcmlcIik7XG4gIH1cbn0pO1xuIl19
